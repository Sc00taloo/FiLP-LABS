fact(0,F,F):-!.
fact(I,F,Fact):-Fact1 is Fact * I, I1 is I - 1, fact(I1,F,Fact1).
fact(N,X):-fact(N,X,1).

psfdin(0,S,S):-!.
psfdin(X,S,Sum):-X1 is X div 10, Dig is X mod 10, fact(Dig,N), Sum1 is Sum + N, psfdin(X1,S,Sum1).
pr_sum_fact_dig_is_num(X):-psfdin(X,Sum,0), X is Sum.

task13(X):-task13(10000,X,0).
task13(2,X,X):-!.
task13(N,X,Sum):- pr_sum_fact_dig_is_num(N), Sum1 is Sum + N, N1 is N - 1, task13(N1,X,Sum1), !.
task13(N,X,Sum):-N1 is N - 1, task13(N1,X,Sum).
