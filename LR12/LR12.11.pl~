simple(1) :- !, fail.
simple(X) :- simple(X, 2).
simple(X, X) :- !.
simple(X, I) :- 0 =:= (X mod I), !, fail; I1 is I + 1, simple(X, I1), !.

% 11.1
notSimDelSum_Up(X, Res) :- nsds(X, X, Res).
nsds(_, 2, 1) :- !.
nsds(X, I, Res) :- I1 is I - 1, nsds(X, I1, Res1), (not(simple(I)), 0 =:= (X mod I), Res is Res1 + I;Res is Res1), !.

% 11.2
notSimDelSum_Down(X, Res) :- nsds_(X, X, 1, Res).
nsds_(_, 2, Res, Res) :- !.
nsds_(X, I, CurSum, Res) :- I1 is I - 1, (not(simple(I)), 0 =:= (X mod I), !), NewSum is CurSum + I, nsds_(X, I1, NewSum, Res); I2 is I - 1, nsds_(X, I2, CurSum, Res).
